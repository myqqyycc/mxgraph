<!--
  Copyright (c) 2006-2013, JGraph Ltd

  Codec example for mxGraph. This example demonstrates dynamically
  creating a graph from XML and encoding the model into XML, as well
  as changing the default style for edges in-place.
-->
<html>
<head>
    <title>Codec example for mxGraph</title>

    <!-- Sets the basepath for the library if not in same directory -->
    <script type="text/javascript">
        mxBasePath = '/page/src';
    </script>
    <!-- Loads and initializes the library -->
    <script type="text/javascript" src="/page/src/js/mxClient.js"></script>
    <script type="text/javascript" src="js/Graph.js"></script>
    <script type="text/javascript" src="js/Shapes.js"></script>
    <!-- Example code -->
    <script type="text/javascript">
        // Program starts here. Creates a sample graph in the
        // DOM node with the specified ID. This function is invoked
        // from the onLoad event handler of the document (see below).
        var graph;
        function main(container)
        {
            if (mxClient.isBrowserSupported())
            {
                var xml = '<mxGraphModel dx="1634" dy="516" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169"><root><mxCell id="0"/><mxCell id="1" parent="0"/><mxCell id="4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.65;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="2" target="3"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="2" value="" style="triangle;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="140" y="240" width="60" height="80" as="geometry"/></mxCell><mxCell id="3" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1"><mxGeometry x="520" y="360" width="80" height="80" as="geometry"/></mxCell></root></mxGraphModel>';
                var xmlDocument = mxUtils.parseXml(xml);
                var decoder = new mxCodec(xmlDocument);
                var node = xmlDocument.documentElement;
                graph = new mxGraph(container);
                decoder.decode(mxUtils.load('/page/examples/grapheditor/www/styles/default.xml').getDocumentElement(), graph.getStylesheet());

                graph.centerZoom = false;
                graph.setTooltips(false);
                graph.setEnabled(false);

                // Enables panning with left mouse button
                graph.panningHandler.useLeftButtonForPanning = true;
                graph.panningHandler.ignoreCell = true;
                graph.container.style.cursor = 'move';
                graph.setPanning(true);


                decoder.decode(node, graph.getModel());
                graph.resizeContainer = false;
            }
        };
    </script>
</head>
<body>
<div id="gggg" style="width: 100%;height: 100%"></div>
</body>
<script type="text/javascript">

    main(document.getElementById("gggg"));

</script>
</html>
